arch:
  - arm64

addons:
  hosts:
    - node1

script:
  - cd ../
  - wget https://dl.bintray.com/boostorg/release/1.69.0/source/boost_1_69_0.tar.gz
  - tar -zxf boost_1_69_0.tar.gz
  - cd boost_1_69_0
  - sh bootstrap.sh --with-libraries=all -with-toolset=gcc
  - sh b2 toolset=gcc
  - sh b2 install --prefix=/usr
  - ldconfig  

  - wget http://www.colm.net/files/ragel/ragel-6.10.tar.gz
  - tar -zxf ragel-6.10.tar.gz
  - cd ./ragel-6.10
  - sudo ./configure
  - sudo make -j16
  - sudo make install
  
  - cd ../
  - wget https://sourceforge.net/projects/pcre/files/pcre/8.43/pcre-8.43.tar.gz
  - tar -zxf pcre-8.43.tar.gz
  - sudo cp -rf ./pcre-8.43 ./hyperscan/pcre
  
  - cd ./hyperscan
  - rm -rf build
  - mkdir build
  - cd build
  - cmake .. 
  - make -j16
  - sudo ./bin/unit-hyperscan
  